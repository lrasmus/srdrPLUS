javascript:
  var updateSectionFlag = function(domEl) {
    var sectionId = domEl.id[0];
    var sd_meta_datum_id = $(domEl).attr('data-sd_meta_datum_id');
    var status = domEl.checked;
    var paramKey = `section_flag_${sectionId}`;
    $.post(`${$('#sd-meta-form')[0].action}/section_update`,
      { sd_meta_datum: { [paramKey]: status } },
      function( data ) { check(sectionId, data.status); }
    );
  }

  $('.switch-input').on('click', function() {
    if (this.id[0] != 4) { updateSectionFlag(this); }
  });

  var initializeSwitches = function() {
    if ("#{@sd_meta_datum.section_flag_0}" === 'true') {
      $('#0-yes-no-section')[0].checked = true;
      check(0, true)
    }
    if ("#{@sd_meta_datum.section_flag_1}" === 'true') {
      $('#1-yes-no-section')[0].checked = true;
      check(1, true)
    }
    if ("#{@sd_meta_datum.section_flag_2}" === 'true') {
      $('#2-yes-no-section')[0].checked = true;
      check(2, true)
    }
    if ("#{@sd_meta_datum.section_flag_3}" === 'true') {
      $('#3-yes-no-section')[0].checked = true;
      check(3, true)
    }
    if ("#{@sd_meta_datum.section_flag_4}" === 'true') {
      $('#4-yes-no-section')[0].checked = true;
      check(4, true)
    }
    if ("#{@sd_meta_datum.section_flag_5}" === 'true') {
      $('#5-yes-no-section')[0].checked = true;
      check(5, true)
    }
  };

  $( document ).ready(function() {
    setTimeout(function(){ initializeSwitches(); }, 500);
  });

  var submit_form = function() {
    var data = $('#sd-meta-form').serialize();

    $.ajax({
      type: "POST",
      url: "/sd_meta_data/2",
      data: data
    });
  }

  window.submit_form = submit_form;
